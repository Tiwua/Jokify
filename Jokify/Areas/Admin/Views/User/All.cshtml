@using Jokify.Core.Models.Admin;
@model UserPageModel

<style>
    body {
        height: 100%;
        margin: 0;
        font-family: sans-serif;
        font-weight: 100;
    }

    .container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    table {
        width: 1000px;
        height: 50px;
        border-collapse: collapse;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(25, 0, 255, 0.1);
        border: 0.5px solid rgba(25, 0, 255, 0.01);
    }

    th,
    td {
        padding: 15px;
        background-color: rgba(255, 255, 255, 0.2);
        color: #fff;
        text-align: center;
    }

    th {
        text-align: center;
    }
    thead th {
        background-color: #55608f;
    }

    tbody tr:hover {
        background-color: rgba(255, 255, 255, 0.3);
    }

    td:hover {
        position: relative;
    }

        td:hover:before {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            top: -9999px;
            bottom: -9999px;
            background-color: rgba(255, 255, 255, 0.2);
            z-index: -1;
        }

    .delete-user-button {
        background-color: #007bff;
        color: #fff;
        width: 70px;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 3px;
        margin-right: 5px;
        margin-left: 35px;
        position: relative;
        right: 55px;
        top: 20px;
        font-size: 18px;
    }

        .delete-user-button:hover {
            background-color: #ff4b2b;
            transform: scale(1.1);
        }

    .forget-user-button {
        background-color: #007bff;
        color: #fff;
        width: 70px;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 3px;
        margin-right: 5px;
        margin-left: 35px;
        position: relative;
        left: 35px;
        font-size: 18px;
        bottom: 15px;
    }

        .forget-user-button:hover {
            background-color: #ff4b2b;
            transform: scale(1.1);
        }

    .text-center {
        text-align: center;
    }
    .arrow-box-disabled {
        display: none;
    }

    .arrow-box {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 55px;
        height: 45px;
        background-color: #ff4b2b;
        padding: 10px;
        transition: transform 0.3s ease;
        border-radius: 10px;
        position: relative;
        top: 200px;
        right: 600px;
    }

    .arrow {
        color: white;
        position: absolute;
        width: 35px;
        height: 30px;
        transition: transform 0.3s ease;
        font-weight: 900;
        font-size: 35px;
        line-height: 0.5;
    }

        .arrow::before,
        .arrow::after {
            position: absolute;
            width: 10px;
            height: 2px;
        }

    .button-left::before,
    .button-left::after,
    .button-right::before,
    .button-right::after {
        background-color: #fff;
    }

    .button-left::before {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
    }

    .button-left::after {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(45deg);
    }

    .button-right::before {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(135deg);
    }

    .button-right::after {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-135deg);
    }

    .arrow-box:hover {
        transform: scale(1.1);
    }

    .arrow:hover {
        transform: scale(1.1);
    }

    .right {
        position: absolute;
        top: 20px;
        left: 430px;
    }

    .left {
        position: absolute;
        top: 20px;
        left: 370px;
    }
</style>



<div class="container">
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>IsDeleted</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                <tr>
                    <td>@user.Username</td>
                    <td>@user.Email</td>
                    <td>@(user.IsDeleted ? "Yes" : "No")</td>
                    <td>
                        <form asp-controller="Admin" asp-action="DeleteUser" method="post">
                            <input type="hidden" name="userId" value="@user.UserId" />
                            <button type="submit" class="delete-user-button" onclick="return confirm('Are you sure you want to delete this user?')">Delete</button>
                        </form>
                        <form asp-controller="Admin" asp-action="ForgetUser" method="post">
                            <input type="hidden" name="userId" value="@user.UserId" />
                            <button type="submit" class="forget-user-button" onclick="return confirm('Are you sure you want to forget this user?')">Forget</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
@{
    var previousPage = Model.CurrentPage - 1;
    if (previousPage < 1)
    {
        previousPage = 1;
    }

    var maxPage = Math.Ceiling((double)Model.TotalUsers /
    Model.PageSize);
}

@{
    var shouldButtonBeDisabled = Model.CurrentPage == maxPage ||
    Model.TotalUsers == 0;
}

<div class="left">
    <a class="arrow-box@(Model.CurrentPage == 1 ? "-disabled" : string.Empty)"
       asp-controller="Joke"
       asp-action="Details"
       asp-route-page="@previousPage">
        <span class="arrow button-left">
            &larr;
        </span>
    </a>
</div>


<div class="right">
    <a class="arrow-box@(shouldButtonBeDisabled ? "-disabled" : string.Empty)"
       asp-controller="Joke"
       asp-action="Details"
       asp-route-page="@(Model.CurrentPage + 1)">
        <span class="arrow button-right">
            &rarr;
        </span>
    </a>
</div>